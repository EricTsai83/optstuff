---
title: Core Concepts
description: The key building blocks of OptStuff — Teams, Projects, API Keys, signed URLs, and domain whitelisting.
---

This page explains the foundational concepts you'll encounter when using OptStuff.

## Resource Hierarchy

OptStuff organizes resources in a three-level hierarchy:

```text
Team (organization)
 └── Project (application)
      └── API Key (credentials)
```

### Teams

A team is the top-level organization unit. When you sign up, a **personal team** is created automatically. You can create additional teams later for different organizations.

| Property | Description |
|----------|-------------|
| Unique slug | URL identifier (e.g., `optstuff.com/my-team`) |
| Owner | The user who created the team; only the owner can manage resources |

### Projects

A project represents an application or environment. Each project has:

- A unique **slug** used in API URLs (e.g., `/api/v1/my-blog/...`)
- **Domain Security** settings (configured in the project's Settings tab):
  - **Authorized Websites** (`allowedRefererDomains`) — controls which websites can use this project's API
  - **Image Sources** (`allowedSourceDomains`) — controls which image origins can be processed
- Usage analytics and request logs

### API Keys

Each API key is a **dual-key pair** used to authenticate image requests:

| Component | Format | Purpose | Safe to Expose? |
|-----------|--------|---------|-----------------|
| **Public Key** | `pk_...` | Identifies the key in API URLs | Yes |
| **Secret Key** | `sk_...` | Signs URLs server-side | **Never** |

API keys also carry access rules:

- **Rate limits** — per-minute and per-day request limits
- **Expiration** — optional automatic invalidation date

> **Important:** The secret key is only shown **once** at creation (or rotation). Store it securely in your environment variables.

## Signed URLs

Every image request must include a cryptographic signature proving the URL was generated by someone who holds the secret key.

```text
Your Server                           OptStuff Server
┌──────────────┐                     ┌──────────────────┐
│ 1. Build path │                     │ 4. Recompute sig │
│ 2. Sign with  │ ──── request ────→ │ 5. Compare sigs  │
│    secretKey  │                     │ 6. Process image │
│ 3. Embed URL  │ ←── response ────  │    if match      │
└──────────────┘                     └──────────────────┘
```

The server doesn't maintain a list of "valid URLs." A valid signature **is** the authorization proof.

For implementation details, see the [URL Signing](/guides/url-signing) guide.

## Domain Whitelisting

OptStuff provides two layers of domain control:

| Layer | Setting | Question | Scope |
|-------|---------|----------|-------|
| **Project** | `allowedRefererDomains` | Who can **use** this API? | HTTP Referer header |
| **Project** | `allowedSourceDomains` | Which **image sources** can be processed? | Image URL in request |

Both settings are configured in the project's **Settings → Domain Security** tab. For configuration instructions, see [Domain Whitelisting](/guides/domain-whitelisting).

## Four-Layer Permission Model

Access control is enforced at every level:

```text
Level 1: User Authentication (Clerk)
 → Verifies user identity

Level 2: Team Ownership
 → Only the team owner can manage resources

Level 3: Project Settings
 → Referer domain restrictions, source domain restrictions

Level 4: API Key Controls
 → Rate limits, expiration
```

## Next Steps

- [Quick Start](/getting-started/quickstart) — Get your first optimized image in 5 minutes
- [Dashboard Setup](/getting-started/dashboard-setup) — Create teams, projects, and API keys
